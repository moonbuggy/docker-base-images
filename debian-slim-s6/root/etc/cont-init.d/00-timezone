#!/usr/bin/execlineb -P

with-contenv
importas -D "" TZ TZ
ifelse -Xn { test -n "${TZ}" } { exit }

define tz_file "/usr/share/zoneinfo/${TZ}"

ifelse -X { test -f "${tz_file}" }
  {
    foreground { ln -sf "${tz_file}" "/etc/localtime" }
    echo "[00-timezone] set timezone: ${TZ}"
  }
  foreground { echo "[00-timezone] ERROR: cannot find ${tz_file}" }
  echo "[00-timezone] ERROR: invalid TZ string: ${TZ}"
